import"./style.a87c9e06.js";import{r as u,R as I,j as a,a as s,c as S}from"./jsx-runtime.55c6f37b.js";const U=({deleteFn:e,saveFn:n,index:d,questionObj:l})=>{const[r,g]=u.exports.useState(""),[c,v]=u.exports.useState([{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]),y=t=>{g(t.target.value)},p=(t,i)=>{const h=[...c];h[i].text=t.target.value,v(h)};return I.useEffect(()=>{n(l.id,r,c)},[r,c]),a("form",{onSubmit:t=>{t.preventDefault(),console.log("submitting")},className:"cs1 ce12",style:{backgroundColor:"#F5F5F5"},children:[a("div",{class:"form-group",children:[s("label",{children:`Question ${d+1}:`}),s("input",{className:"input",type:"text",value:r,onChange:y})]}),a("div",{class:"form-group",children:[s("label",{children:"Answer 1:"}),s("input",{className:"input",type:"text",value:c[0].text,onChange:t=>p(t,0)})]}),a("div",{class:"form-group",children:[s("label",{children:"Answer 2:"}),s("input",{className:"input",type:"text",value:c[1].text,onChange:t=>p(t,1)})]}),a("div",{class:"form-group",children:[s("label",{children:"Answer 3:"}),s("input",{className:"input",type:"text",value:c[2].text,onChange:t=>p(t,2)})]}),a("div",{class:"form-group",children:[s("label",{children:"Answer 4:"}),s("input",{className:"input",type:"text",value:c[3].text,onChange:t=>p(t,3)})]}),s("button",{onClick:t=>{t.preventDefault(),e(l.id)},className:"button button-danger",children:"Delete"})]})};let m;const P=new Uint8Array(16);function R(){if(!m&&(m=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(P)}const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function A(e,n=0){return o[e[n+0]]+o[e[n+1]]+o[e[n+2]]+o[e[n+3]]+"-"+o[e[n+4]]+o[e[n+5]]+"-"+o[e[n+6]]+o[e[n+7]]+"-"+o[e[n+8]]+o[e[n+9]]+"-"+o[e[n+10]]+o[e[n+11]]+o[e[n+12]]+o[e[n+13]]+o[e[n+14]]+o[e[n+15]]}const Q=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),b={randomUUID:Q};function D(e,n,d){if(b.randomUUID&&!n&&!e)return b.randomUUID();e=e||{};const l=e.random||(e.rng||R)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,n){d=d||0;for(let r=0;r<16;++r)n[d+r]=l[r];return n}return A(l)}const k=()=>{const[e,n]=u.exports.useState([]);u.exports.useState(!1);const[d,l]=u.exports.useState(null);u.exports.useEffect(()=>{const t=async()=>{miro.board.events.broadcast("RUNNING_POLL?",{})};t();const i=setInterval(t,5e3);return()=>{clearInterval(i)}},[]),u.exports.useEffect(()=>{miro.board.events.on("RUNNING_POLL",t=>{console.log("RUNNING_POLL",t),l(t)})},[]);const r=()=>{n([...e,{id:D(),question:"",answers:[]}])},g=(t,i,h)=>{const w=e.findIndex(C=>C.id===t);let x=[...e];x.splice(w,1,{id:t,question:i,answers:h}),n(x)},c=t=>{n(e.filter(i=>i.id!==t))},v=async()=>{const t=JSON.stringify(e);miro.board.ui.openModal({url:`poll-host.html?questions=${encodeURIComponent(t)}&host=${!0}`,width:800,height:800})},y=async()=>{miro.board.ui.openModal({url:"poll-participant.html",width:800,height:800})};return s("div",{children:d?(()=>s("div",{className:"grid wrapper",children:s("div",{className:"cs1 ce12",children:s("button",{className:"button button-primary centered",onClick:y,children:"Join Poll"})})}))():(()=>a("div",{className:"grid wrapper",children:[a("div",{className:"cs1 ce12",children:[e.length==0&&s("h3",{children:"There are no currently running polls, Add a question to get started!"}),e.length>0&&s("h3",{children:"Fill in question details below and click start poll when ready."})]}),e.map((t,i)=>s("div",{className:"cs1 ce12",children:s(U,{saveFn:g,deleteFn:c,index:i,questionObj:t})},t.id)),s("div",{className:"cs1 ce12 centered",children:s("button",{className:"button button-secondary",onClick:r,children:"Add Question"})}),s("div",{className:"cs1 ce12 centered",children:e.length>0&&s("button",{className:"button button-primary",onClick:v,children:"Start Poll"})})]}))()})},q=document.getElementById("root"),F=S(q);F.render(s(k,{}));
